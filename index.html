<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · NeXLUncertainties.jl</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link rel="stylesheet" href="https://pages.nist.gov/nist-header-footer/css/nist-combined.css">
<script src="https://pages.nist.gov/nist-header-footer/js/jquery-1.9.0.min.js" type="text/javascript" defer="defer"></script>
<script src="https://pages.nist.gov/nist-header-footer/js/nist-header-footer.js" type="text/javascript" defer="defer"></script>
</head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>NeXLUncertainties.jl</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Installing-NeXLUncertainies.jl"><span>Installing NeXLUncertainies.jl</span></a></li><li><a class="tocitem" href="#About-NeXLUncertainties.jl"><span>About NeXLUncertainties.jl</span></a></li><li><a class="tocitem" href="#Important-Types"><span>Important Types</span></a></li><li><a class="tocitem" href="#UncertainValue"><span><code>UncertainValue</code></span></a></li><li><a class="tocitem" href="#Label"><span><code>Label</code></span></a></li><li><a class="tocitem" href="#LabeledValues"><span><code>LabeledValues</code></span></a></li><li><a class="tocitem" href="#UncertainValues"><span><code>UncertainValues</code></span></a></li><li><a class="tocitem" href="#Propagating-Uncertainties"><span>Propagating Uncertainties</span></a></li><li><a class="tocitem" href="#Getting-Started"><span>Getting Started</span></a></li></ul></li><li><a class="tocitem" href="gettingstarted/">Getting Started</a></li><li><a class="tocitem" href="composing/">Composing Multi-Step Models</a></li><li><a class="tocitem" href="resistors/">Resistor Network Example</a></li><li><a class="tocitem" href="methods/">Methods</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/usnistgov/NeXLUncertainties.jl/blob/master/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="NeXLUncertainties.jl"><a class="docs-heading-anchor" href="#NeXLUncertainties.jl">NeXLUncertainties.jl</a><a id="NeXLUncertainties.jl-1"></a><a class="docs-heading-anchor-permalink" href="#NeXLUncertainties.jl" title="Permalink"></a></h1><h2 id="Installing-NeXLUncertainies.jl"><a class="docs-heading-anchor" href="#Installing-NeXLUncertainies.jl">Installing NeXLUncertainies.jl</a><a id="Installing-NeXLUncertainies.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Installing-NeXLUncertainies.jl" title="Permalink"></a></h2><p>NeXLUncertainies is available throught the standard Julia registry and can be installed using the standard package manager.</p><pre><code class="language-julia hljs">julia&gt; ]add NeXLUncertainties</code></pre><p>or</p><pre><code class="language-julia hljs">julia&gt; using Pkg
julia&gt; Pkg.add(&quot;NeXLUncertainties&quot;)</code></pre><h2 id="About-NeXLUncertainties.jl"><a class="docs-heading-anchor" href="#About-NeXLUncertainties.jl">About NeXLUncertainties.jl</a><a id="About-NeXLUncertainties.jl-1"></a><a class="docs-heading-anchor-permalink" href="#About-NeXLUncertainties.jl" title="Permalink"></a></h2><p>NeXLUncertainies is a library for propagating the uncertainty in multivariate measurement models. What does this mean?</p><p>A measurement model is a way to transform the measured values into the desired output values.  A very simple measurement model would be the following:</p><ul><li>You measure a length in inches but need to transform the measured value by multiplying by 25.4 mm/inch to report in millimeters.</li><li>Slightly more complex, you measure the length and width of a rectangle and need to report the area.</li></ul><p>These models are considered univariate because there is a single output value.</p><p>A multivariate measurement model is a model in which there are multiple outputs. <img src="univsmulti.png" alt="Comparing univariate and multivariate measurement models"/></p><p>A simple example of multivariate measurement model:</p><ul><li>You measure the length and width of a rectangle and need to report the area, the perimeter and the aspect ratio.</li></ul><p>If you have a model of the univariate type <a href="https://github.com/JuliaPhysics/Measurements.jl">Measurements.jl</a> is probably what you want.  If you have a model of the multivariate-type <code>NeXLUncertainties</code> might be a better choice.</p><p>Often the distinction doesn&#39;t matter.  However, if, in our simple multivariate example, the area, perimeter and aspect ratio are used in subsequent calculations, ignoring the correlations between these values is likely to mis-estimate the resulting uncertainty.</p><p>The distinctions can matter for X-ray microanalysis where many k-ratios are measured and many compositional metrics are reported.  In between, there is a complex measurement model that depends upon many measured inputs and many physical parameters.  Hence this library was developed as part of the NeXL collection of X-ray microanalysis algorithms.</p><h2 id="Important-Types"><a class="docs-heading-anchor" href="#Important-Types">Important Types</a><a id="Important-Types-1"></a><a class="docs-heading-anchor-permalink" href="#Important-Types" title="Permalink"></a></h2><p>There are two ways to represent numbers with associated uncertainties in <code>NeXLUncertainies</code></p><ul><li><code>UncertainValue</code> - Represents a single quantity with associated uncertainty</li><li><code>UncertainValues</code> - Represents a collection of related quantities with the associated uncertainty relationships</li></ul><p>There are two important utility types</p><ul><li><code>Label</code> - Provides an abstract type for labels that uniquely identify and track quantities</li><li><code>LabeledValues</code> - A collection of <code>Label</code>ed quantities (no associated uncertainties)</li></ul><h2 id="UncertainValue"><a class="docs-heading-anchor" href="#UncertainValue"><code>UncertainValue</code></a><a id="UncertainValue-1"></a><a class="docs-heading-anchor-permalink" href="#UncertainValue" title="Permalink"></a></h2><p>An <code>UncertainValue</code> is a simple wrapper around a value and an associated variance. <code>UncertainValue</code> objects are often used as inputs to calculations or outputs from calculations as they are more &quot;user friendly&quot;.</p><p>Common operations:</p><pre><code class="language-julia hljs">julia&gt; a = uv(1.2,0.1) # Creates an `UncertainValue`
1.2 ± 0.1
julia&gt; σ(a)
0.1
julia&gt; value(a)
1.2
julia&gt; variance(a)
0.01</code></pre><h2 id="Label"><a class="docs-heading-anchor" href="#Label"><code>Label</code></a><a id="Label-1"></a><a class="docs-heading-anchor-permalink" href="#Label" title="Permalink"></a></h2><p><code>Label</code> is an abstract class that can represent either simple or complex mechanisms to uniquely identify quantities.   If a quantity is used in two part of a calculation, the way that we identify that these two values are related is   through the label.</p><pre><code class="language-julia hljs">julia&gt; l = nl&quot;X&quot; # Constructs a String-based label
X
julia&gt; m = label(12) # Constructs an Int-based label
12</code></pre><h2 id="LabeledValues"><a class="docs-heading-anchor" href="#LabeledValues"><code>LabeledValues</code></a><a id="LabeledValues-1"></a><a class="docs-heading-anchor-permalink" href="#LabeledValues" title="Permalink"></a></h2><p><code>LabeledValues</code> are like a dictionary mapping a <code>Label</code> into a quantity.</p><pre><code class="language-julia hljs">julia&gt; lvs = LabeledValues( nl&quot;A&quot;=&gt;3.4, nl&quot;B&quot;=&gt;4.5, nl&quot;C&quot;=&gt;5.6 )
LabeledValues[
      A =&gt; 3.4
      B =&gt; 4.5
      C =&gt; 5.6
]
julia&gt; lvs[nl&quot;A&quot;]
3.4</code></pre><h2 id="UncertainValues"><a class="docs-heading-anchor" href="#UncertainValues"><code>UncertainValues</code></a><a id="UncertainValues-1"></a><a class="docs-heading-anchor-permalink" href="#UncertainValues" title="Permalink"></a></h2><p>An <code>UncertainValues</code> represents a collection of <code>Label</code>ed quantities and the associated covariance matrix.   <code>UncertainValues</code> often represent the output of a measurement model (or calculation).  Each quantity in the <code>UncertainValues</code> object is identified by a unique <code>Label</code> to permit values, variances and covariances to be readily tracked.</p><pre><code class="language-julia hljs">julia&gt; u1 = uvs([ nl&quot;A&quot;, nl&quot;B&quot;, nl&quot;C&quot;], [3.4, 4.5, 5.6], [ 0.01 0.001 0.0; 0.001 0.004 0.0; 0.0 0.0 0.009 ])
Variable       Value              A           B           C
A          | 3.4      |     |   0.01        0.001       0         |
B          | 4.5      |     |   0.001       0.004       0         |
C          | 5.6      |     |   0           0           0.009     |
julia&gt; u1[nl&quot;B&quot;]
4.5 ± 0.063
julia&gt; covariance(u1, nl&quot;A&quot;, nl&quot;B&quot;)
0.001
julia&gt; value(u1, nl&quot;A&quot;)
3.4
julia&gt; σ(u1, nl&quot;A&quot;)
0.1</code></pre><h2 id="Propagating-Uncertainties"><a class="docs-heading-anchor" href="#Propagating-Uncertainties">Propagating Uncertainties</a><a id="Propagating-Uncertainties-1"></a><a class="docs-heading-anchor-permalink" href="#Propagating-Uncertainties" title="Permalink"></a></h2><p>Implementations of the <code>MeasurementModel</code> abstract type provide the mechanism by which uncertainties are propagated. Types implementing the <code>MeasurementModel</code> type are responsible for implementing one method:</p><pre><code class="language-julia hljs">julia&gt; compute(mm::YourMeasurementModel, inputs::LabeledValues, withJac::Boolean)::MMResult</code></pre><p>where</p><pre><code class="language-julia hljs">MMResult = Tuple{LabeledValues, Union{Missing,AbstractMatrix{Float64}}}</code></pre><p>The <code>compute(...)</code> takes a <code>LabeledValues</code> object which defines where the model is to be evaluated.   It returns either a <code>Tuple{LabeledValues, Missing}</code> (if <code>withJac==false</code>) or a <code>Tuple{LabeledValues, AbstractMatrix{Float64}}</code> (if <code>withJac==true</code>).  The <code>LabeledValues</code> return value represents the measurement model evaluated at <code>inputs</code>. The <code>AbstractMatrix{Float64}</code> represents the Jacobian of the measurement model or the matrix of partial derivatives evaluated at <code>inputs</code>.  Users of the library are responsible for defining the necessary <code>MeasurementModel</code> types and the associated <code>compute(...)</code> functions.</p><h2 id="Getting-Started"><a class="docs-heading-anchor" href="#Getting-Started">Getting Started</a><a id="Getting-Started-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-Started" title="Permalink"></a></h2><p>The pages in the left-hand menu will help you to get started. &quot;Getting Started&quot; provides an overview.  &quot;Resistor Network Example&quot; shows how to implement multi-step <code>MeasurementModels</code> and use function composition to join the steps into a complex measurement model. &quot;Composing Multi-Step Models&quot; provides additional insight into how to use the ∘, | and ^ binary operators to combine simple steps into complex calculations.</p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="gettingstarted/">Getting Started »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.5 on <span class="colophon-date" title="Sunday 1 August 2021 13:41">Sunday 1 August 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
